From 3284813587c14ff30f64df56a830a48c6be8cbb2 Mon Sep 17 00:00:00 2001
From: Alex Gonzalez <alex.gonzalez@digi.com>
Date: Thu, 11 Jul 2013 18:06:41 +0200
Subject: [PATCH] Rename MTD_MODE_* to MTD_FILE_MODE_*

On the 3.10 kernel, this ioctl has changed name.

Signed-off-by: Alex Gonzalez <alex.gonzalez@digi.com>
---
 src/mtd.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/src/mtd.c b/src/mtd.c
index 0ae1ece..79734fb 100644
--- a/src/mtd.c
+++ b/src/mtd.c
@@ -614,7 +614,7 @@ struct mtd_data *mtd_open(const struct mtd_config *cfg, int flags)
 
 		miu = &mp->info;
 
-		r = ioctl(mp->fd, MTDFILEMODE, (void *)MTD_MODE_NORMAL);
+		r = ioctl(mp->fd, MTDFILEMODE, (void *)MTD_FILE_MODE_NORMAL);
 		if (r != 0 && r != -ENOTTY) {
 			fprintf(stderr, "mtd: device %s can't switch to normal\n", mp->name);
 			goto out;
@@ -800,13 +800,13 @@ int mtd_set_ecc_mode(struct mtd_data *md, int ecc)
 			continue;
 
 		if (ecc == 1) {
-			r = ioctl(mp->fd, MTDFILEMODE, (void *)MTD_MODE_NORMAL);
+			r = ioctl(mp->fd, MTDFILEMODE, (void *)MTD_FILE_MODE_NORMAL);
 			if (r != 0 && r != -ENOTTY) {
 				fprintf(stderr, "mtd: device %s can't switch to normal\n", mp->name);
 				continue;
 			}
 		} else {
-			r = ioctl(mp->fd, MTDFILEMODE, (void *)MTD_MODE_RAW);
+			r = ioctl(mp->fd, MTDFILEMODE, (void *)MTD_FILE_MODE_RAW);
 			if (r != 0 && r != -ENOTTY) {
 				fprintf(stderr, "mtd: device %s can't switch to RAW\n", mp->name);
 				continue;
